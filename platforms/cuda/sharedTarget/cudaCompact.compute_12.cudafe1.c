# 1 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
# 1292 "/usr/local/cuda-5.0/include/driver_types.h"
struct CUstream_st;
# 199 "/usr/include/math.h" 3
enum _ZUt_ {
FP_NAN,

FP_INFINITE,

FP_ZERO,

FP_SUBNORMAL,

FP_NORMAL};
# 292 "/usr/include/math.h" 3
enum _LIB_VERSION_TYPE {
_IEEE_ = (-1),
_SVID_,
_XOPEN_,
_POSIX_,
_ISOC_};
# 30 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.h"
struct compactionPlan;
# 124 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_voidIvEUt_E { _ZNSt9__is_voidIvE7__valueE = 1};
# 144 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIbEUt_E { _ZNSt12__is_integerIbE7__valueE = 1};
# 151 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIcEUt_E { _ZNSt12__is_integerIcE7__valueE = 1};
# 158 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIaEUt_E { _ZNSt12__is_integerIaE7__valueE = 1};
# 165 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIhEUt_E { _ZNSt12__is_integerIhE7__valueE = 1};
# 173 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIwEUt_E { _ZNSt12__is_integerIwE7__valueE = 1};
# 197 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIsEUt_E { _ZNSt12__is_integerIsE7__valueE = 1};
# 204 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerItEUt_E { _ZNSt12__is_integerItE7__valueE = 1};
# 211 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIiEUt_E { _ZNSt12__is_integerIiE7__valueE = 1};
# 218 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIjEUt_E { _ZNSt12__is_integerIjE7__valueE = 1};
# 225 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIlEUt_E { _ZNSt12__is_integerIlE7__valueE = 1};
# 232 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerImEUt_E { _ZNSt12__is_integerImE7__valueE = 1};
# 239 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIxEUt_E { _ZNSt12__is_integerIxE7__valueE = 1};
# 246 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt12__is_integerIyEUt_E { _ZNSt12__is_integerIyE7__valueE = 1};
# 264 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt13__is_floatingIfEUt_E { _ZNSt13__is_floatingIfE7__valueE = 1};
# 271 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt13__is_floatingIdEUt_E { _ZNSt13__is_floatingIdE7__valueE = 1};
# 278 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt13__is_floatingIeEUt_E { _ZNSt13__is_floatingIeE7__valueE = 1};
# 354 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_charIcEUt_E { _ZNSt9__is_charIcE7__valueE = 1};
# 362 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_charIwEUt_E { _ZNSt9__is_charIwE7__valueE = 1};
# 377 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_byteIcEUt_E { _ZNSt9__is_byteIcE7__valueE = 1};
# 384 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_byteIaEUt_E { _ZNSt9__is_byteIaE7__valueE = 1};
# 391 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/cpp_type_traits.h" 3
enum _ZNSt9__is_byteIhEUt_E { _ZNSt9__is_byteIhE7__valueE = 1};
# 211 "/usr/lib/gcc/x86_64-redhat-linux/4.4.7/include/stddef.h" 3
typedef unsigned long size_t;
#include "crt/host_runtime.h"
# 30 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.h"
struct compactionPlan {
char valid;
unsigned *dgBlockCounts;
unsigned nThreadBlocks;
char stageOutput;char __nv_no_debug_dummy_end_padding_0[3];};
# 28 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
typedef unsigned T;
void *memcpy(void*, const void*, size_t); void *memset(void*, int, size_t);
# 1283 "/usr/local/cuda-5.0/include/cuda_runtime_api.h"
extern enum cudaError cudaGetDeviceProperties(struct cudaDeviceProp *, int);
# 1497 "/usr/local/cuda-5.0/include/cuda_runtime_api.h"
extern enum cudaError cudaGetDevice(int *);
# 2049 "/usr/local/cuda-5.0/include/cuda_runtime_api.h"
extern enum cudaError cudaConfigureCall(struct dim3, struct dim3, size_t, struct CUstream_st *);
# 2320 "/usr/local/cuda-5.0/include/cuda_runtime_api.h"
extern enum cudaError cudaMalloc(void **, size_t);
# 2454 "/usr/local/cuda-5.0/include/cuda_runtime_api.h"
extern enum cudaError cudaFree(void *);
# 186 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
extern void planCompaction(struct compactionPlan *, char);
# 198 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
extern void destroyCompactionPlan(struct compactionPlan *);



extern int compactStream(const struct compactionPlan *, T *, const T *, const unsigned *, size_t, size_t *);
extern int __cudaSetupArgSimple();
extern int __cudaLaunch();
extern void __nv_dummy_param_ref();
extern int __cudaRegisterEntry();
extern int __cudaRegisterBinary();
static void __sti___30_cudaCompact_compute_20_cpp1_ii_a1db1d0a(void) __attribute__((__constructor__));
# 186 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
void planCompaction( struct compactionPlan *d,  char stageOutput) {
 int __cuda_local_var_15094_9_non_const_device;

 struct cudaDeviceProp __cuda_local_var_15096_20_non_const_deviceProp;
# 188 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
cudaGetDevice((&__cuda_local_var_15094_9_non_const_device));

cudaGetDeviceProperties((&__cuda_local_var_15096_20_non_const_deviceProp), __cuda_local_var_15094_9_non_const_device);
(d->nThreadBlocks) = ((unsigned)(16 * (__cuda_local_var_15096_20_non_const_deviceProp.multiProcessorCount)));
cudaMalloc(((void **)(&(d->dgBlockCounts))), (((unsigned long)(d->nThreadBlocks)) * 4UL));
(d->stageOutput) = stageOutput;

(d->valid) = ((char)1); 
}

void destroyCompactionPlan( struct compactionPlan *d) {
if (d->valid) { cudaFree(((void *)(d->dgBlockCounts))); } 
}

int compactStream( const struct compactionPlan *d,  T *dOut,  const T *dIn,  const unsigned *dValid,  size_t len,  size_t *dNumValid) {  struct dim3 __T20;
 struct dim3 __T21;



 unsigned __cuda_local_var_15114_18_non_const_numBlocks;


 size_t __cuda_local_var_15117_18_non_const_eltsPerBlock;
# 203 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
if (!(d->valid)) {
return (-1);
}

__cuda_local_var_15114_18_non_const_numBlocks = (d->nThreadBlocks);
if (((unsigned long)(__cuda_local_var_15114_18_non_const_numBlocks * 128U)) > len) {
__cuda_local_var_15114_18_non_const_numBlocks = ((unsigned)((len + 127UL) / 128UL)); }
__cuda_local_var_15117_18_non_const_eltsPerBlock = ((len / ((unsigned long)__cuda_local_var_15114_18_non_const_numBlocks)) + ((unsigned long)((len % ((unsigned long)__cuda_local_var_15114_18_non_const_numBlocks)) ? 1 : 0)));



(cudaConfigureCall((((void)((((__T20.x) = __cuda_local_var_15114_18_non_const_numBlocks) , (void)((__T20.y) = 1U)) , (void)((__T20.z) = 1U))) , __T20), (((void)((((__T21.x) = 128U) , (void)((__T21.y) = 1U)) , (void)((__T21.z) = 1U))) , __T21), 0UL, ((struct CUstream_st *)0LL))) ? ((void)0) : (__device_stub__Z9countEltsPjPKjmm((d->dgBlockCounts), dValid, __cuda_local_var_15117_18_non_const_eltsPerBlock, len));


if (d->stageOutput) {  struct dim3 __T22;
 struct dim3 __T23;
# 218 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
(cudaConfigureCall((((void)((((__T22.x) = __cuda_local_var_15114_18_non_const_numBlocks) , (void)((__T22.y) = 1U)) , (void)((__T22.z) = 1U))) , __T22), (((void)((((__T23.x) = 128U) , (void)((__T23.y) = 1U)) , (void)((__T23.z) = 1U))) , __T23), 0UL, ((struct CUstream_st *)0LL))) ? ((void)0) : (__device_stub__Z23moveValidElementsStagedPKjPjS0_S0_mmPm(dIn, dOut, dValid, ((const unsigned *)(d->dgBlockCounts)), __cuda_local_var_15117_18_non_const_eltsPerBlock, len, dNumValid));
} else  {  struct dim3 __T24;
 struct dim3 __T25;
# 220 "/home/saifmulla/openmm/OpenMM/platforms/cuda/./src/kernels//cudaCompact.cu"
(cudaConfigureCall((((void)((((__T24.x) = __cuda_local_var_15114_18_non_const_numBlocks) , (void)((__T24.y) = 1U)) , (void)((__T24.z) = 1U))) , __T24), (((void)((((__T25.x) = 128U) , (void)((__T25.y) = 1U)) , (void)((__T25.z) = 1U))) , __T25), 0UL, ((struct CUstream_st *)0LL))) ? ((void)0) : (__device_stub__Z26moveValidElementsScatteredPKjPjS0_S0_mmPm(dIn, dOut, dValid, ((const unsigned *)(d->dgBlockCounts)), __cuda_local_var_15117_18_non_const_eltsPerBlock, len, dNumValid));
}
return 0;
}
static void __sti___30_cudaCompact_compute_20_cpp1_ii_a1db1d0a(void) {   }

#include "cudaCompact.compute_12.cudafe1.stub.c"
